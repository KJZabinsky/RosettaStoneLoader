<!DOCTYPE html>
<html>
<head>
    <title>Welcome To Rosetta Stone!</title>
    <link rel="icon" type="image/png" href="https://kjzabinsky.github.io/RosettaStoneLoader/Other-rosetta-stone-icon.png">
    <style>
        body {
            background-color: #f1f3f6;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .loader {
            width: 45px;
            height: 45px;
            border: 6px solid #f1f3f6;
            border-top-color: #BBBBBB;
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        /* New styles */
        #top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 40px;
            background-color: #f1f3f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
        }

        #title {
            cursor: pointer;
            font-weight: bold;
            display: none;
            text-align: left;
        }

        #close-button {
            cursor: pointer;
            font-weight: bold;
            display: none;
            text-align: right;
            background-color: red;
            color: white; /* Set text color to white */
            width: 3%; /* Set width to 5% of the div */
            height: 100%; /* Fill the height of the div */
            text-align: center;
        }


        #minnit-chat {
            position: fixed;
            top: 40px;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ffffff;
            display: none;
        }

        iframe {
            width: 100%;
            height: calc(100vh - 40px);
            border: none;
        }
    </style>
    <script>
        var chatOpen = false;

        function toggleChat() {
            var chat = document.getElementById("minnit-chat");
            var closeButton = document.getElementById("close-button");

            if (chatOpen) {
                chat.style.display = "none";
                closeButton.style.display = "none";
                title.style.display = "none";
            } else {
                chat.style.display = "block";
                closeButton.style.display = "block";
                title.style.display = "block";
            }

            chatOpen = !chatOpen;
        }

        function openLink() {
            var urlParams = new URLSearchParams(window.location.search);
            var link = urlParams.get("link");
            if (link) {
                setTimeout(function() {
                    window.location.href = link;
                }, 30000); // delay time
            }
        }

        window.onload = function () {
            openLink();
        };

        // Handle key press events
        document.onkeydown = function(e) {
            if (e.key === " ") {
                e.preventDefault(); // Prevent spacebar scrolling
                toggleChat();
            }
        };
    </script>
</head>
<body>
    <div id="top-bar">
        <h3 id="title" >Chat - View - (Press Red Button To Close)</h3>
        <span id="close-button" onclick="toggleChat()">  </span>
    </div>

    <div class="loader"></div>

    <div id="minnit-chat">
<script src="https://minnit.chat/js/embed.js" defer></script><minnit-chat data-chatname="https://organizations.minnit.chat/5612273100655920398/RosettaStoneChat?embed&nickname=" data-style="width:100%;height:100%px;"></minnit-chat>
    </div>
</body>
</html>
